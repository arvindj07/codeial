
<h1>
  Codeial | <%= title %>
</h1>

<section id="feed-posts">
  <h4>Posts</h4>

    <!-- Make the Post form visible only to Logged-in Users -->
  <% if(locals.user){ %> 
    <!-- Create a Post using the Form -->
    <form action="/posts/create" method="POST" id="new-post-form">
      <textarea name="content" cols="30" rows="3" placeholder="Type Here..." required></textarea>
      <input type="submit" value="Post">

    </form>
    
  <% } %>
  
       <!-- Display the Posts using for loop -->
  <div id="posts-list-container">
    <ul>
      <% for(post of posts) {%>
        
        <p>
          <li>
            <%= post.content %>
            <br>
            <small>
              <%= post.user.name %>
            </small>
          </li>
        </p>   
        
           <!-- Create a comment on a particular Post if the user is Signed-In  -->
        
        <div class="post-comments">
          <% if(locals.user) { %>
            <form action="/comments/create" method="POST">
              <input type="text" name="content" placeholder="Add Comment..." required>
                  <!-- here we r sending the Post id in a hidden manner using input type-hidden -->
              <input type="hidden" name="post" value="<%= post._id %>">      
              <input type="submit" value="Add Comment">

            </form>

          <% } %>


            <!-- Displaying the Comments on each post -->
          <div id="post-comments-list">
            <ul id="post-comments-<%= post._id %>">

              <% for(comment of post.comments) { %>
                <p>
                  <%= comment.content %>
                  <br>
                  <small>
                    <%= comment.user.name %>
                  </small>
                  
                </p>
              <% } %>

            </ul>

          </div>

        </div>

        
        
        
      <% } %>

    </ul>
  </div>

</section>

    